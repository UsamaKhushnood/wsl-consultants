(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fb151040"],{"6b1f":function(t,e,a){"use strict";a("f7af")},"9ddf":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"all-leads-page"}},[a("div",{staticClass:"vd_content-wrapper"},[a("div",{staticClass:"vd_content clearfix"},[t._m(0),a("div",{staticClass:"clearfix"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("button",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"create-lead-modal",expression:"'create-lead-modal'"}],staticClass:"btn btn-dark btn-sm ml-auto d-block mb-2"},[t._v(" Create New Lead ")]),a("CreateNewLead"),a("EditLead"),a("div",{attrs:{id:"Country1"}},[a("div",{staticClass:"widget"},[a("div",{staticClass:"bg-white"},[a("div",{attrs:{id:"new-request-tab-c1"}},[a("CDataTable",{staticClass:"leads-table",attrs:{responsive:"",hover:!0,striped:!0,border:!0,fixed:!1,items:[].concat(t.allStudentData),columnFilter:"",itemsPerPageSelect:"",itemsPerPage:20,sorter:"",fields:["first_name","whatsapp_num","phone","country","assigned_to","status",{key:"action",sorter:!1}],pagination:""},scopedSlots:t._u([{key:"assigned_to",fn:function(e){var s=e.item;return[a("td",[null==s.agent?a("span",{staticClass:"badge badge-pill badge-danger"},[t._v(" unassigned ")]):a("span",[t._v(" "+t._s(null==s.agent?"unassigned":s.agent.first_name)+" ")])])]}},{key:"whatsapp_num",fn:function(e){var s=e.item;return[a("td",[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"https://api.whatsapp.com/send?phone="+s.whatsapp_num,target:"_blank",title:"Click To Open Whatsapp"}},[t._v(" "+t._s(s.whatsapp_num)+" ")])])]}},{key:"PreferredCountry",fn:function(e){var s=e.item;return[a("td",[a("p",[t._v(" "+t._s(s.country)+" ")])])]}},{key:"PhoneNo",fn:function(e){var s=e.item;return[a("td",[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{href:"tel:"+s.phone,title:"Click To Make Phone Call"}},[t._v(" "+t._s(s.phone)+" ")])])]}},{key:"status",fn:function(e){var s=e.item;return[a("td",{staticClass:"status text-center"},[a("b-form-select",{attrs:{size:"sm",options:["New Lead","In Progress","Expected","Not Expected","Applied","On Hold","Rejected"]},on:{change:function(e){return t.changeStatus(s)}},model:{value:s.status,callback:function(e){t.$set(s,"status",e)},expression:"item.status"}})],1)]}},{key:"action",fn:function(e){var s=e.index,n=e.item;return[a("td",{staticClass:"menu-action"},[a("a",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"view-details-sidebar"+s,expression:"'view-details-sidebar' + index"}],staticClass:"btn menu-icon vd_bd-green vd_green",attrs:{"data-target":"#viewAccept","data-toggle":"modal"},on:{click:function(e){return t.currentStudent(n)}}},[a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-eye",attrs:{title:"View Form"}})]),a("a",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"successfully-added-modal"+s,expression:"'successfully-added-modal' + index"}],staticClass:"btn menu-icon vd_bd-yellow vd_yellow",attrs:{"data-target":"#viewAccept","data-toggle":"modal"},on:{click:function(e){return t.currentStudent(n)}}},[a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-check",attrs:{title:"Assign"}})]),a("a",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"edit-lead-modal",expression:"'edit-lead-modal'"}],staticClass:"btn edit-icon menu-icon  vd_bd-black vd_bd-black ",attrs:{item:n.id},on:{click:function(e){return t.setStudent(n)}}},[a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-pen",attrs:{title:"Edit Lead"}})]),a("a",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"add-note-modal"+s,expression:"'add-note-modal' + index"}],staticClass:"btn edit-icon menu-icon  vd_bd-black vd_bd-black ",attrs:{"data-target":"#denyRequest","data-toggle":"modal",item:n.id},on:{click:function(e){return t.setStudent(n)}}},[a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-book",attrs:{title:"Add Note"}})]),"admin"==t.getUser.type?a("a",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"deny-request-modal"+s,expression:"'deny-request-modal' + index"}],staticClass:"btn menu-icon vd_bd-red vd_red",attrs:{"data-target":"#denyRequest","data-toggle":"modal",item:n.id}},[a("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fa fa-trash",attrs:{title:"Delete"},on:{click:function(e){return t.setStudent(n)}}})]):t._e(),a("AllPopups",{attrs:{propsindex:s}})],1)]}}])})],1)])])])],1)])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vd_title-section clearfix"},[a("div",{staticClass:"vd_panel-header"},[a("h1",[a("i",{staticClass:"fas fa-cubes"}),t._v(" All Leads")])])])}],r=(a("1157"),a("08be"),a("6556"),a("f236")),i=a("7387"),o=a("3925"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-lead-popup position-relative "},[a("b-modal",{ref:"edit_lead_modal",attrs:{id:"edit-lead-modal",title:"Edit Lead","header-bg-variant":"dark","header-text-variant":"light",centered:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("div",{staticClass:"modal-body"},[a("form",{staticClass:"form-group",attrs:{id:"myLead"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-element"},[a("label",{attrs:{for:"agentFirstName"}},[t._v("First Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.first_name,expression:"first_name"}],attrs:{type:"text",id:"agentFirstName"},domProps:{value:t.first_name},on:{input:function(e){e.target.composing||(t.first_name=e.target.value)}}})])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-element"},[a("label",{attrs:{for:"last_name"}},[t._v("Last Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.last_name,expression:"last_name"}],attrs:{type:"text",id:"last_name"},domProps:{value:t.last_name},on:{input:function(e){e.target.composing||(t.last_name=e.target.value)}}})])])]),a("div",{staticClass:"form-element"},[a("label",{attrs:{for:"country"}},[t._v("Preferred Country:")]),a("b-form-select",{attrs:{required:"",options:["Austria ","Europe","Canada","Italy","Itly MBBS","Turkey MBBS","UK","USA","Visit Canada","Visit USA"]},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}})],1),a("div",{staticClass:"form-element"},[a("label",{attrs:{for:"phone"}},[t._v("Phone Number:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"text",id:"phone"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),a("div",{staticClass:"form-element"},[a("label",{attrs:{for:"whatsapp_num"}},[t._v("Whatsapp Number:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.whatsapp_num,expression:"whatsapp_num"}],attrs:{type:"text",required:"",id:"whatsapp_num"},domProps:{value:t.whatsapp_num},on:{input:function(e){e.target.composing||(t.whatsapp_num=e.target.value)}}})]),a("div",{staticClass:"form-element"},[a("label",{attrs:{for:"email"}},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],attrs:{type:"text",required:"",id:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"form-element"},[a("label",{attrs:{for:"cv"}},[t._v("Student CV:")]),a("input",{ref:"file",attrs:{type:"file",required:"",id:"cv"},on:{change:function(e){return t.handleCvUpload(e)}}})]),a("div",{staticClass:"form-element"},[a("label",{attrs:{for:"agentFirstName"}},[t._v("Screenshots:")]),a("VueUploadMultipleImage",{attrs:{"data-images":t.uploadedImages},on:{"upload-success":t.uploadImageSuccess,"edit-image":t.editImage,"data-change":t.dataChange}}),a("p",{staticClass:"badge mb-0 text-capitalize text-secondary"},[t._v(" max uplaod limit is 5 ")])],1)])])]},proxy:!0},{key:"modal-footer",fn:function(e){var s=e.hide;return[a("div",[a("div",{staticClass:"row mt-4 mr-2 justify-content-end"},[a("b-button",{ref:"cancel",staticClass:"mr-2",attrs:{variant:"dark",squared:""},on:{click:s}},[t._v("Cancel")]),a("b-button",{attrs:{variant:"success",squared:""},on:{click:t.addLead}},[t._v("Create")])],1)]),a("b-overlay",{staticClass:"overlayModal",attrs:{show:t.formOverlay,"no-wrap":""}})]}}])})],1)},c=[],d=a("fc5c"),u=a("bc3a"),m=a.n(u),p=a("2f62");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){g(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function g(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var h={data:function(){return{visibleLiveDemo:!1,first_name:"",last_name:"",country:"",email:"",phone:"",whatsapp_num:"",cv:"",screenShot:"",imageList:[],uploadedImages:[],formOverlay:!1}},computed:f(f({},Object(p["b"])(["getUser","getSelectedStudent"])),Object(p["c"])(["allStudentData"])),components:{VueUploadMultipleImage:d["a"]},mounted:function(){},methods:{handleCvUpload:function(t){var e=this,a=this,s=t.target.files[0],n=new FileReader;n.readAsDataURL(s),n.onload=function(t){a.cv=t.target.result,console.log(e.cv)}},handleScreenshot:function(t){var e=this,a=this,s=t.target.files[0],n=new FileReader;n.readAsDataURL(s),n.onload=function(t){a.screenShot=t.target.result,console.log(e.screenShot)}},addLead:function(){var t=this,e=this,a="";a="Sales Agent"==e.getUser.type?"https://admin.agentmis.com/api/sales-agent/new-leads":"Call Center Agent"==e.getUser.type?"https://admin.agentmis.com/api/call-agent/new-leads":"https://admin.agentmis.com/api/admin/new-leads";new FormData,document.querySelector("#cv"),document.querySelector("#scr");this.formOverlay=!0,m.a.post(a,{first_name:e.first_name,last_name:e.last_name,country:e.country,email:e.email,cv:e.cv,screen_shot:e.imageList,whatsapp_num:e.whatsapp_num,phone:e.phone}).then((function(a){t.formOverlay=!1,console.log("data::",a.data),e.$toast.success(a.data.message,{position:"top-right",closeButton:"button",icon:!0,rtl:!1}),e.first_name="",e.last_name="",e.country="",e.email="",e.phone="",e.whatsapp_num="",e.cv="",e.screenShot="",e.$store.commit("SET_All_STUDENT",!0),e.$getStudent(),e.$refs.cancel.click()})).catch((function(e){t.formOverlay=!1;var a="";console.log(e,"create new lead errors"),e.response.data.errors.email&&(a+=e.response.data.errors.email),e.response.data.errors.password&&(a+=e.response.data.errors.password),e&&t.$toast.error(a,{position:"top-right",closeButton:"button",icon:!0,rtl:!1})}))},uploadImageSuccess:function(t,e,a){console.log(t,"index:",e,a,"upload success"),this.imageList.push(a[0].path)},editImage:function(t,e,a){console.log(t,"index:",e,a,"edit image")},dataChange:function(t){console.log(t,"dataChange")}},destroyed:function(){this.$store.commit("SET_ALL_STUDENT_DATA",null)}},b=h,_=a("2877"),w=Object(_["a"])(b,l,c,!1,null,null,null),y=w.exports;function C(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function S(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?C(Object(a),!0).forEach((function(e){P(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function P(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var O={name:"NewRequest",components:{WidgetsDropdown:r["a"],AllPopups:i["a"],CreateNewLead:o["a"],EditLead:y},data:function(){return{items:[],deleteStudentId:"",currentPage:1,itemsPerPage:3,resultCount:0}},computed:S(S(S({},Object(p["b"])(["getUser","getAllStudentData"])),Object(p["c"])(["allStudent","allStudentData"])),{},{totalPages:function(){return 0==this.resultCount?1:Math.ceil(this.resultCount/this.itemsPerPage)},paginate:function(){if(this.articles&&this.articles.length==this.articles.length){this.resultCount=this.articles.length,this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages);var t=this.currentPage*this.itemsPerPage-this.itemsPerPage;return this.articles.slice(t,t+this.itemsPerPage)}}}),methods:{setPage:function(t){this.currentPage=t},setStudent:function(t){this.$store.commit("SET_CURRENT_STUDENT",null),this.$store.commit("SET_CURRENT_STUDENT",t)},changeStatus:function(t){var e=this,a=this;console.log(t.status);var s="";s="admin"==a.getUser.type?"https://admin.agentmis.com/api/admin/status/"+t.id:"https://admin.agentmis.com/api/sales-agent/status/"+t.id,m.a.post(s,{status:t.status}).then((function(t){console.log("data::",t.data),a.$toast.success(t.data.message,{position:"top-right",closeButton:"button",icon:!0,rtl:!1}),a.$getStudent()})).catch((function(t){var a="";console.log("(error.response.status",t.response.status),console.log("errors.response.data",t.response.data.errors),console.log("errors.response.data",t.response.data),t&&e.$toast.error(a,{position:"top-right",closeButton:"button",icon:!0,rtl:!1})}))},currentStudent:function(t){this.$store.commit("SET_CURRENT_STUDENT",{}),this.$store.commit("SET_CURRENT_STUDENT",t)}},mounted:function(){},watch:{},created:function(){this.$getStudent()}},N=O,x=(a("6b1f"),a("d825"),Object(_["a"])(N,s,n,!1,null,null,null));e["default"]=x.exports},d825:function(t,e,a){"use strict";a("ed04")},ed04:function(t,e,a){},f7af:function(t,e,a){}}]);
//# sourceMappingURL=chunk-fb151040.3489a11a.js.map